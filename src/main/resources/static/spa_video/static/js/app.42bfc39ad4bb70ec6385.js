webpackJsonp([1],{"+skl":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},s,!1,function(t){n("yGYl")},null,null).exports,i=n("/ocq"),r=(n("o+9D"),{name:"headbar",props:["user"],data:function(){return{}},methods:{show:function(){this.$axios.get("/api/alpha/").then(function(t){alert(t.data),console.log(t)}).catch(function(t){alert(t),console.log(t)})}}}),d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header"},[n("div",{staticClass:"hd-tl"},[t._m(0),t._v(" "),t._m(1),t._v(" "),void 0!=t.user.id?n("div",{staticClass:"us"},[n("Dropdown",[n("div",[n("div",{staticClass:"un"},[t._v(t._s(t.user.nickname))]),t._v(" "),n("img",{attrs:{src:t.user.header}})]),t._v(" "),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",[n("a",{attrs:{href:"/zone/"}},[n("b",[t._v("个人中心")])])]),t._v(" "),n("DropdownItem",[n("a",{attrs:{href:"/logout/"}},[n("b",[t._v("注销")])])])],1)],1)],1):n("div",{staticClass:"nous"},[n("a",{attrs:{href:"/login/"}},[n("Button",{attrs:{type:"success",size:"large"}},[t._v("登录")])],1),t._v(" "),n("a",{attrs:{href:"/register/"}},[n("Button",{attrs:{type:"warning",size:"large"}},[t._v("注册")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tl"},[e("a",{attrs:{href:"/"}},[e("i",[this._v("Simon Says")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{float:"left","margin-left":"20px","font-size":"22px",padding:"5px"}},[e("i",[this._v("最燃最皮的弹幕社区")])])}]};var l=n("VU/8")(r,d,!1,function(t){n("zKPy")},"data-v-a8872b3e",null).exports,c=n("mtWM"),u=n.n(c);var v={dateToStr:function(t){var e=t.getFullYear(),n=(t.getMonth()+1).toString(),a=t.getDate().toString();return 1==n.length&&(n="0"+n),1==a.length&&(a="0"+a),e+"-"+n+"-"+a}},p={name:"TopPanel",props:["video"],data:function(){return{upper:{}}},computed:{date:function(){return v.dateToStr(new Date(this.video[0].createAt))}},methods:{},mounted:function(){}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"ltpn"},[n("div",{staticClass:"vdtl"},[n("h1",{staticClass:"one-line",domProps:{textContent:t._s(t.video[0].name)}})]),t._v(" "),n("div",[n("Row",{staticClass:"rw"},[n("Col",{attrs:{span:"4"}},[n("Icon",{attrs:{type:"person"}}),t._v(" "),n("b",[n("span",{domProps:{textContent:t._s(t.video[0].upper)}})])],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("Icon",{attrs:{type:"play",size:"16"}}),t._v(" "),n("b",[n("span",{domProps:{textContent:t._s(t.video[0].view)}}),t._v(" "),n("span",[t._v("次")])])],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("Icon",{attrs:{type:"clock",size:"16"}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.date)}})],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("Icon",{attrs:{type:"document-text"}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.video[0].sort)}})],1)],1)],1)]),t._v(" "),n("div",{staticClass:"rtpn"},[n("Row",[n("Col",{attrs:{span:"7"}},[n("img",{attrs:{src:t.video[1].header}})]),t._v(" "),n("Col",{attrs:{span:"17"}},[n("div",{staticClass:"nknm"},[n("h2",{domProps:{textContent:t._s(t.video[1].nickname)}})]),t._v(" "),n("div",{domProps:{textContent:t._s(t.video[1].intro)}})])],1)],1)])},staticRenderFns:[]},_=n("VU/8")(p,f,!1,null,null,null).exports,h=(n("rlDF"),n("Igiw")),m=n.n(h),g={name:"VdPanel",props:["video","user"],data:function(){return{dp:{},danmaku:[{}]}},methods:{initVd:function(){var t=this;t.dp=new m.a({container:document.getElementById("player"),screenshot:!0,video:{url:t.video.url,pic:t.video.cover,thumbnails:t.video.cover},danmaku:{id:t.video.id,api:"/api/danmaku/",user:t.user.id}}),t.dp.on("canplay",function(){t.$parent.danRow=t.dp.danmaku.dan})}},mounted:function(){var t=this;setTimeout(function(){t.initVd()},500)}},C={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"player"}})])}]},y=n("VU/8")(g,C,!1,null,null,null).exports,x=(n("slth"),{name:"Index",data:function(){return{user:{},video:[{},{}],damaku:[{}],danCol:[{title:"内容",key:"text"},{title:"进度",key:"time"}],danRow:[{}]}},methods:{fakeLogin:function(){var t=this;t.$axios.get("/api/user/fake/login/").then(function(e){t.key=e.data.data,console.log(t.key)}).catch(function(t){alert(t)})},fetchUserInfo:function(){var t=this;t.$axios.get("/api/user/").then(function(e){200==e.data.code?t.user=e.data.data:(t.user.id=-1,t.user.nickname="游客",console.log(e))}).catch(function(e){t.user.nickname="游客",t.user.id=-1,console.log(e)})},fetchVideo:function(){var t=this,e=t.$route.params.vid;t.$axios.get("/api/file/video/"+e).then(function(e){200==e.data.code?t.video=e.data.data:console.log(e)}).catch(function(t){console.log(t)})}},mounted:function(){this.fetchUserInfo(),this.fetchVideo(),console.log(this.user)},components:{HeadBar:l,TopPanel:_,VdPanel:y}}),w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("HeadBar",{attrs:{user:t.user}}),t._v(" "),n("div",{staticClass:"top-panel"},[n("TopPanel",{ref:"topPanel",attrs:{video:t.video}})],1),t._v(" "),n("div",{staticClass:"main-panel"},[n("div",{staticClass:"ltpn"},[n("VdPanel",{ref:"vdPanel",attrs:{video:t.video[0],user:t.user}})],1),t._v(" "),n("div",{staticClass:"rtpn"},[n("Table",{attrs:{columns:t.danCol,data:t.danRow,height:"470",size:"small"}})],1)]),t._v(" "),n("div",{staticClass:"foot-panel"},[n("div",[n("Row",[n("Col",{attrs:{span:"8"}},[n("h1",[t._v("视频简介")])]),t._v(" "),n("Col",{attrs:{span:"5",offset:"11"}},[n("Button",{attrs:{type:"primary"}},[t._v("点赞")]),t._v(" "),n("Button",{attrs:{type:"warning"}},[t._v("收藏")]),t._v(" "),n("Button",{attrs:{type:"success"}},[t._v("分享")])],1)],1)],1),t._v(" "),n("div",{staticClass:"desc",domProps:{textContent:t._s(t.video[0].description)}})])],1)},staticRenderFns:[]};var k=n("VU/8")(x,w,!1,function(t){n("Se1u")},null,null).exports;a.default.use(i.a);var P=new i.a({routes:[{path:"/:vid/",name:"index",component:k}]}),$=n("BTaQ"),V=n.n($);n("+skl"),n("7t+N");a.default.config.productionTip=!1,a.default.use(V.a),a.default.prototype.$axios=u.a,new a.default({el:"#app",router:P,components:{App:o},template:"<App/>"})},Se1u:function(t,e){},"o+9D":function(t,e){},rlDF:function(t,e){},slth:function(t,e){},yGYl:function(t,e){},zKPy:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.42bfc39ad4bb70ec6385.js.map