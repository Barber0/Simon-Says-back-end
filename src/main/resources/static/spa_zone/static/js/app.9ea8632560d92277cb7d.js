webpackJsonp([1],{"+skl":function(t,e){},"1Pvf":function(t,e){},"5G+/":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),o=s("mvHQ"),n=s.n(o),i=(s("jizF"),{name:"headbar",props:["user"],data:function(){return{}},methods:{show:function(){this.$axios.get("/api/alpha/").then(function(t){alert(t.data),console.log(t)}).catch(function(t){alert(t),console.log(t)})}}}),r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header"},[s("div",{staticClass:"hd-tl"},[t._m(0),t._v(" "),t._m(1),t._v(" "),void 0!=t.user.id?s("div",{staticClass:"us"},[s("Dropdown",[s("div",[s("div",{staticClass:"un"},[t._v(t._s(t.user.nickname))]),t._v(" "),s("img",{attrs:{src:t.user.header}})]),t._v(" "),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",[s("a",{attrs:{href:"/zone/"}},[s("b",[t._v("个人中心")])])]),t._v(" "),s("DropdownItem",[s("a",{attrs:{href:"/logout/"}},[s("b",[t._v("注销")])])])],1)],1)],1):s("div",{staticClass:"nous"},[s("a",{attrs:{href:"/login/"}},[s("Button",{attrs:{type:"success",size:"large"}},[t._v("登录")])],1),t._v(" "),s("a",{attrs:{href:"/register/"}},[s("Button",{attrs:{type:"warning",size:"large"}},[t._v("注册")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tl"},[e("a",{attrs:{href:"/"}},[e("i",[this._v("Simon Says")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{float:"left","margin-left":"20px","font-size":"22px",padding:"5px"}},[e("i",[this._v("最燃最皮的弹幕社区")])])}]};var l=s("VU/8")(i,r,!1,function(t){s("5G+/")},"data-v-c5fac750",null).exports,c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog"},[s("Row",{staticClass:"rw"},[s("Col",{attrs:{span:"3"}},[t._v("\r\n      Id：\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("span",{domProps:{textContent:t._s(t.user.id)}})]),t._v(" "),s("Col",{attrs:{span:"3",offset:"1"}},[t._v("\r\n      用户名：\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("span",{domProps:{textContent:t._s(t.user.username)}})])],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"3"}},[t._v("\r\n      昵称\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("Input",{attrs:{placeholder:"请输入您的昵称"},model:{value:t.user.nickname,callback:function(e){t.$set(t.user,"nickname",e)},expression:"user.nickname"}})],1),t._v(" "),s("Col",{staticClass:"lb",attrs:{span:"3",offset:"1"}},[t._v("\r\n      邮箱\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("Input",{attrs:{placeholder:"请输入您的邮箱"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"3"}},[t._v("\r\n      自我介绍\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"20"}},[s("Input",{attrs:{placeholder:"请输入您的自我介绍"},model:{value:t.user.intro,callback:function(e){t.$set(t.user,"intro",e)},expression:"user.intro"}})],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"3"}},[t._v("\r\n      上传头像\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("Upload",{ref:"uploader",attrs:{action:"/api/file/upload/img/",name:"file","show-upload-list":!0,"on-success":t.finishUpload}},[s("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("Upload files")])],1)],1)],1)],1)},staticRenderFns:[]};var d={name:"VideoDialog",data:function(){return{video:{name:"",description:"",url:"",cover:"",sort:1},sorts:[]}},methods:{vdFinish:function(t,e,s){200==t.code?(this.$Notice.success({title:"视频上传成功",desc:"你有新的投稿"}),this.video.url=t.data):this.$Notice.error({title:"视频上传失败",desc:t.msg})},cvFinish:function(t,e,s){200==t.code?(this.$Notice.success({title:"封面上传成功",desc:"视频有封面啦！！！"}),this.video.cover=t.data):this.$Notice.error({title:"封面上传失败",desc:t.msg})},fetchSort:function(){var t=this;t.$axios.get("/api/common/sort/").then(function(e){200==e.data.code?t.sorts=e.data.data:console.log(e)}).catch(function(t){console.log(t)})}},mounted:function(){this.fetchSort()}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog"},[s("Row",{staticClass:"rw"},[s("Col",{attrs:{span:"24"}},[s("Input",{attrs:{placeholder:"视频名称"},model:{value:t.video.name,callback:function(e){t.$set(t.video,"name",e)},expression:"video.name"}})],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"5"}},[t._v("\r\n      视频种类\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"19"}},[s("Select",{model:{value:t.video.sort,callback:function(e){t.$set(t.video,"sort",e)},expression:"video.sort"}},t._l(t.sorts,function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"5"}},[t._v("\r\n      上传视频\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"19"}},[s("Upload",{ref:"vdUploader",attrs:{action:"/api/file/upload/video/",name:"file","show-upload-list":!0,"on-success":t.vdFinish}},[s("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("上传视频")])],1)],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"5"}},[t._v("\r\n      上传视频封面\r\n    ")]),t._v(" "),s("Col",{attrs:{span:"19"}},[s("Upload",{ref:"cvUploader",attrs:{action:"/api/file/upload/img/",name:"file","show-upload-list":!0,"on-success":t.cvFinish}},[s("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{attrs:{span:"24"}},[s("Input",{attrs:{type:"textarea",placeholder:"视频简介"},model:{value:t.video.description,callback:function(e){t.$set(t.video,"description",e)},expression:"video.description"}})],1)],1)],1)},staticRenderFns:[]};var p={name:"NameTag",props:["user","bkUp"],data:function(){return{bn1Style:{backgroundImage:"url(/spa/zone/banner.jpg)"},infoDialog:!1,uploadDialog:!1,chPassDialog:!1,pass:{origin:"",new_pass:"",check_pass:""}}},methods:{upload:function(){alert("你好")},toolBar:function(t){var e=this,s=e.$refs.infoD;switch(t){case"info":e.infoDialog=!0,s.user=e.bkUp;break;case"upload":e.uploadDialog=!0;break;case"logout":location="/logout/";break;case"chpass":e.chPassDialog=!0;break;default:alert(t)}},submitUpdate:function(){var t=this;t.$axios.put("/api/user/",t.bkUp).then(function(e){console.log(e),200==e.data.code&&(t.user=e.data.data,t.$Notice.success({title:"个人信息修改成功",desc:"信息修改成功"}))}).catch(function(t){console.log(t)})},submitPassCh:function(){var t=this;t.$axios.post("/api/user/ch/",t.pass).then(function(e){200==e.data.code?t.$Notice.success({title:"密码修改成功"}):(t.$Notice.error({title:"修改失败"}),console.log(e))}).catch(function(e){t.$Notice.error({title:"修改失败"}),console.log(e)})},abc:function(t){alert(t)},submitVideo:function(){var t=this,e=t.$refs.videoD.video;t.$axios.post("/api/file/video/",e).then(function(e){200==e.data.code?(t.$Notice.success({title:"投稿成功",desc:"恭喜恭喜，又多了一件新作品"}),t.$parent.$refs.vdList.fetchVideos()):t.$Notice.error({title:"投稿失败",desc:e.data.msg})}).catch(function(t){console.log(t)})}},mounted:function(){},components:{InfoDialog:s("VU/8")({name:"InfoDialog",data:function(){return{rsp:{},fi:{},list:[],user:{}}},methods:{finishUpload:function(t,e,s){200==t.code?(this.$Notice.success({title:"头像上传成功",desc:"新形象，新印象"}),this.user.header=t.data):this.$Notice.error({title:"文件上传错误",desc:t.msg})}},mounted:function(){}},c,!1,function(t){s("zx7/")},null,null).exports,VideoDialog:s("VU/8")(d,u,!1,function(t){s("u7/o")},null,null).exports}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"name-card",staticStyle:{padding:"0"}},[s("div",{staticClass:"hd-banner",staticStyle:{"background-image":"url(/banner.jpg)"}},[s("div",{staticClass:"basic-info"},[s("div",{staticClass:"col1"},[s("img",{attrs:{src:t.user.header}})]),t._v(" "),s("div",{staticClass:"col2"},[s("div",{staticClass:"uname one-line"},[t._v(t._s(t.user.nickname))]),t._v(" "),s("div",{staticClass:"intro one-line"},[t._v(t._s(t.user.intro))])])])]),t._v(" "),s("div",{staticClass:"tool-bar"},[s("Menu",{attrs:{mode:"horizontal",theme:"light","active-name":"upload"},on:{"on-select":t.toolBar}},[s("MenuItem",{attrs:{name:"upload"}},[s("Button",{attrs:{type:"success"}},[t._v("上传视频")])],1),t._v(" "),s("MenuItem",{attrs:{name:"info"}},[s("Icon",{attrs:{type:"person"}}),t._v("\r\n        修改信息\r\n      ")],1),t._v(" "),s("MenuItem",{attrs:{name:"chpass"}},[s("Icon",{attrs:{type:"stats-bars"}}),t._v("\r\n        更改密码\r\n      ")],1),t._v(" "),s("MenuItem",{attrs:{name:"logout"}},[s("Icon",{attrs:{type:"stats-bars"}}),t._v("\r\n          注销\r\n      ")],1)],1)],1),t._v(" "),s("Modal",{attrs:{title:"个人信息修改"},on:{"on-ok":t.submitUpdate},model:{value:t.infoDialog,callback:function(e){t.infoDialog=e},expression:"infoDialog"}},[s("InfoDialog",{ref:"infoD"})],1),t._v(" "),s("Modal",{attrs:{title:"视频上传"},on:{"on-ok":t.submitVideo},model:{value:t.uploadDialog,callback:function(e){t.uploadDialog=e},expression:"uploadDialog"}},[s("VideoDialog",{ref:"videoD"})],1),t._v(" "),s("Modal",{attrs:{title:"修改密码"},on:{"on-ok":t.submitPassCh},model:{value:t.chPassDialog,callback:function(e){t.chPassDialog=e},expression:"chPassDialog"}},[s("div",{staticStyle:{padding:"20px"}},[s("div",[s("Input",{attrs:{placeholder:"请输入原密码"},model:{value:t.pass.origin,callback:function(e){t.$set(t.pass,"origin",e)},expression:"pass.origin"}})],1),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{attrs:{placeholder:"请输入新密码"},model:{value:t.pass.new_pass,callback:function(e){t.$set(t.pass,"new_pass",e)},expression:"pass.new_pass"}})],1),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{attrs:{placeholder:"请输入验证密码"},model:{value:t.pass.check_pass,callback:function(e){t.$set(t.pass,"check_pass",e)},expression:"pass.check_pass"}})],1)])])],1)},staticRenderFns:[]};var f=s("VU/8")(p,v,!1,function(t){s("tGgi")},null,null).exports,h={name:"Video",props:["info"],computed:{createAt:function(){return this.dateToString(new Date(this.info.createAt))}},methods:{dateToString:function(t){var e=t.getFullYear(),s=(t.getMonth()+1).toString(),a=t.getDate().toString();return 1==s.length&&(s="0"+s),1==a.length&&(a="0"+a),e+"-"+s+"-"+a}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vd hf"},[s("a",{attrs:{href:t.info.link,target:"blank"}},[s("img",{attrs:{src:t.info.cover}}),t._v(" "),s("div",{staticClass:"one-line txt",domProps:{textContent:t._s(t.info.name)}}),t._v(" "),s("div",{staticClass:"dtl"},[s("div",{staticClass:"one-line txt upper",domProps:{textContent:t._s(t.info.upper)}}),t._v(" "),s("div",{staticClass:"one-line txt created_at",domProps:{textContent:t._s(t.createAt)}})])])])},staticRenderFns:[]};var g={name:"VideoList",props:["user"],data:function(){return{vdList:[],editDialog:!1,editVd:{id:"",name:"",description:"",sort:1},sorts:[],pagi:{total:0,page:1,size:15}}},methods:{fetchVideos:function(){var t=this;t.$axios.get("/api/file/vdpage/?page="+t.pagi.page+"&size="+t.pagi.size).then(function(e){if(200==e.data.code){t.vdList=e.data.data.content;for(var s=0;s<t.vdList.length;s++)t.vdList[s].link="/video/#/"+t.vdList[s].id;t.pagi.total=e.data.data.totalElements}else console.log(e)}).catch(function(t){console.log(t)})},openVdEdit:function(t){this.editVd.id=t.id,this.editVd.name=t.name,this.editDialog=!0},fetchSorts:function(){var t=this;t.$axios.get("/api/common/sort/").then(function(e){200==e.data.code?t.sorts=e.data.data:console.log(e)}).catch(function(t){console.log(t)})},updateVd:function(){var t=this;t.$axios.put("/api/file/video/",t.editVd).then(function(e){200==e.data.code?(t.$Notice.success({title:"编辑成功",desc:"成功修改视频信息"}),t.fetchVideos()):t.$Notice.error({title:"编辑失败",desc:e.data.msg})}).catch(function(t){console.log(t)})},deleteVd:function(t){var e=this;e.$axios.delete("/api/file/video/?id="+t).then(function(s){console.log(s),200==s.data.code?(e.fetchVideos(),e.$Notice.success({title:"删除成功",desc:"成功删除了视频（id:"+t+"）"})):e.$Notice.error({title:"删除失败",desc:s.msg})})},dltVd:function(t){confirm("是否确定要删除此视频")&&this.deleteVd(t.id)},changePage:function(t){this.pagi.page=t,this.fetchVideos()}},components:{Video:s("VU/8")(h,m,!1,function(t){s("TMa0")},null,null).exports},mounted:function(){this.fetchVideos(),this.fetchSorts()}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Card",{staticClass:"vd-list"},[s("Row",{staticStyle:{"min-height":"300px"}},[s("div",t._l(t.vdList,function(e,a){return s("div",{key:a,staticClass:"vd-wrapper"},[s("Video",{attrs:{info:e}}),t._v(" "),s("div",{staticClass:"vd-ope"},[s("Button",{attrs:{type:"primary"},on:{click:function(s){t.openVdEdit(e)}}},[t._v("修改")]),t._v(" "),s("Button",{attrs:{type:"ghost"},on:{click:function(s){t.dltVd(e)}}},[t._v("删除")])],1)],1)}))]),t._v(" "),s("Row",[s("div",{staticClass:"pagi"},[s("Page",{attrs:{current:t.pagi.page,total:t.pagi.total,"page-size":t.pagi.size},on:{"on-change":t.changePage}})],1)])],1),t._v(" "),s("Modal",{attrs:{title:"视频信息编辑"},on:{"on-ok":t.updateVd},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[s("div",{staticClass:"dialog"},[s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"3"}},[t._v("\r\n        视频名称\r\n      ")]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("Input",{attrs:{placeholder:"视频名称"},model:{value:t.editVd.name,callback:function(e){t.$set(t.editVd,"name",e)},expression:"editVd.name"}})],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{staticClass:"lb",attrs:{span:"3"}},[t._v("\r\n        板块\r\n      ")]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("Select",{model:{value:t.editVd.sort,callback:function(e){t.$set(t.editVd,"sort",e)},expression:"editVd.sort"}},t._l(t.sorts,function(e){return s("Option",{key:e.id,attrs:{value:e.id},domProps:{textContent:t._s(e.name)}})}))],1)],1),t._v(" "),s("Row",{staticClass:"rw"},[s("Col",{attrs:{span:"24"}},[s("Input",{attrs:{type:"textarea",placeholder:"视频描述"},model:{value:t.editVd.description,callback:function(e){t.$set(t.editVd,"description",e)},expression:"editVd.description"}})],1)],1)],1)])],1)},staticRenderFns:[]};var C=s("VU/8")(g,_,!1,function(t){s("1Pvf")},null,null).exports,x=(s("uQE9"),{name:"Index",data:function(){return{user:{},key:"",bkUp:{}}},components:{HeadBar:l,NameTag:f,VideoList:C},methods:{fakeLogin:function(){var t=this;t.$axios.get("/api/user/fake/login/").then(function(e){t.key=e.data.data,console.log(t.key)}).catch(function(t){alert(t)})},fetchUserInfo:function(){var t=this;t.$axios.get("/api/user/").then(function(e){200==e.data.code?(t.user=e.data.data,t.bkUp=JSON.parse(n()(t.user)),console.log(t.user)):console.log(e.data.msg)}).catch(function(t){console.log(t)})}},mounted:function(){this.fetchUserInfo()}}),b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeadBar",{attrs:{user:t.user}}),t._v(" "),void 0!=t.user.id?s("div",{staticClass:"zone-panel"},[s("NameTag",{ref:"nameTag",attrs:{user:t.user,bkUp:t.bkUp}}),t._v(" "),s("VideoList",{ref:"vdList",attrs:{user:t.user}})],1):s("div",{staticClass:"zone-panel"},[s("Card",{staticStyle:{"text-align":"center"}},[s("h2",[t._v("您尚未登录")])])],1)],1)},staticRenderFns:[]};var k={name:"App",components:{Index:s("VU/8")(x,b,!1,function(t){s("VFU/")},null,null).exports}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Index")],1)},staticRenderFns:[]};var V=s("VU/8")(k,$,!1,function(t){s("mzP2")},null,null).exports,w=s("mtWM"),D=s.n(w),y=s("BTaQ"),I=s.n(y);s("+skl");a.default.config.productionTip=!1,a.default.use(I.a),a.default.prototype.$axios=D.a,new a.default({el:"#app",components:{App:V},template:"<App/>"})},TMa0:function(t,e){},"VFU/":function(t,e){},jizF:function(t,e){},mzP2:function(t,e){},tGgi:function(t,e){},"u7/o":function(t,e){},uQE9:function(t,e){},"zx7/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9ea8632560d92277cb7d.js.map